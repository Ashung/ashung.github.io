{% include head.html pagename="section-post" %}
<div class="main post">
    <article>
        <header class="post-header-wrap">
            <div class="post-header">
                <h1 class="post-title">{{ page.title }}</h1>
                {% if page.author %}<p class="post-author">作者 {{ page.author }}.</p>{% endif %}
                {% if page.date %}
                <p class="post-date">
                    发表于<time class="post-publish" pubdate datetime="{{ page.date | date: "%Y-%m-%d" }}">{{ page.date | date: "%Y年%m月%-d日" }}</time>{% if page.updated %},
                    最后修订于<time class="post-updated" datetime="{{ page.updated | date: "%Y-%m-%d" }}">{{ page.updated | date: "%Y年%m月%-d日" }}</time>{% endif %}.
                </p>
                {% endif %}
                {% assign tagCount = page.tags | size %}
                {% if tagCount > 0 %}
                <p class="post-tags">
                    {% for tag in page.tags %}
                    <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </p>
                {% endif %}
            </div>
        </header>
        <div class="post-content-wrap">
            <div class="post-content">
                {% unless site.host == "127.0.0.1" %}
                {% if page.draft %}
                <p>下期预告，敬请关注.</p>
                {% else %}
                {{ content }}
                {% endif %}
                {% else %}
                {{ content }}
                {% endunless %}
            </div>
            {% if page.date %}
            <ul class="post-related">
                {% if page.next %}
                <li>新篇: <a class="post-newer" href="{{ page.next.url }}">{{ page.next.title }}</a></li>
                {% endif %}
                {% if page.previous %}
                <li>旧作: <a class="post-older" href="{{ page.previous.url }}">{{ page.previous.title }}</a></li>
                {% endif %}
            </ul>
            {% endif %}
        </div>
    </article>

{% comment %}
    <div id="donate">
        <a id="donate-button-alipay" href="#">Alipay</a>
        <a id="donate-button-wechatpay" href="#">weChat Pay</a>
        <div id="donate-modal-alipay" class="modal">111</div>
        <div id="donate-modal-wechatpay" class="modal">222</div>
        <div id="donate-modal-paypal" class="modal">
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                <input type="hidden" name="cmd" value="_s-xclick">
                <input type="hidden" name="hosted_button_id" value="YB3LBHPPHXM4Y">
                <input type="hidden" name="on0" value="Donate">
                <label for="paypal">via PayPal</label><br>
                <select name="os0" id="paypal">
                    <option value="1 -">1 - $ 1.00 USD</option>
                    <option value="2 -">2 - $ 2.00 USD</option>
                    <option value="3 -">3 - $ 5.00 USD</option>
                </select>
                <input type="hidden" name="currency_code" value="USD">
                <p>
                    <input type="submit" name="submit" value="Pay" alt="PayPal - The safer, easier way to pay online!">
                </p>
            </form>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            $('body').append('<div id="donate-dialog-wrapper"></div>')
                .append($('#donate-modal-alipay'))
                .append($('#donate-modal-wechatpay'))
                .append($('#donate-modal-paypal'));


            $('#donate-button-alipay').click(function(){
                showModal();
                return false;
            });


            $('.modal, #donate-dialog-wrapper').click(hideModal);

            function showModal() {
                $('#donate-dialog-wrapper').show(0, function(){
                    $('#donate-dialog-wrapper').css('opacity', '1');
                    $('#donate-modal-alipay').css({
                        'top' : '200%'
                    });
                    $('#donate-modal-alipay').show(1, function(){
                        $('#donate-modal-alipay').css({
                            'transform' : 'rotate(0)',
                            'top' : '50%',
                            'opacity' : '1'
                        });
                    });
                });
            }

            function hideModal() {
                $('#donate-dialog-wrapper').css('opacity', '0');
                $('#donate-dialog-wrapper').delay(400).hide(0);
                $('#donate-modal-alipay').css({
                    'transform' : 'rotate(-20deg)',
                    'top' : '200%',
                    'opacity' : '0'
                });
                $('#donate-modal-alipay').hide(400);
            }


        });
    </script>

    {% endcomment %}


    {% assign commentId = page.id | replace:  '/', '-' | remove_first: '-' %}
    {% if page.comment == true %}
    <div class="post-comments-wrap">
        <div class="post-comments">
            <div id="SOHUCS" sid="{{ commentId }}"></div>
            <script src="http://changyan.sohu.com/upload/changyan.js"></script>
            <script>
                window.changyan.api.config({
                    appid: 'cyrVOtEMg',
                    conf: 'prod_c6a0ab76c08ae21be1877d9daf4f93f0'
                });
            </script>
        </div>
    </div>
    {% endif %}
</div>

{% include footer.html %}
