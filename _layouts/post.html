{% include head.html pagename="section-post" %}
<div class="main post">
    <article>
        <header class="post-header-wrap">
            <div class="post-header">
                <h1 class="post-title">{{ page.title }}</h1>
                {% if page.author %}<p class="post-author">作者 {{ page.author }}.</p>{% endif %}
                {% if page.date %}
                <p class="post-date">
                    发表于<time class="post-publish" datetime="{{ page.date | date: "%Y-%m-%d" }}">{{ page.date | date: "%Y年%m月%-d日" }}</time>{% if page.updated %},
                    最后修订于<time class="post-updated" datetime="{{ page.updated | date: "%Y-%m-%d" }}">{{ page.updated | date: "%Y年%m月%-d日" }}</time>{% endif %}.
                </p>
                {% endif %}
                {% assign tagCount = page.tags | size %}
                {% if tagCount > 0 %}
                <p class="post-tags">
                    {% for tag in page.tags %}
                    <span class="tag">{{ tag }}</span>
                    {% endfor %}
                </p>
                {% endif %}
            </div>
        </header>
        <div class="post-content-wrap">
            <div class="post-content">
                {% unless site.host == "127.0.0.1" %}
                {% if page.draft %}
                <p>下期预告，敬请关注.</p>
                {% else %}
                {{ content }}
                {% endif %}
                {% else %}
                {{ content }}
                {% endunless %}
            </div>
            {% if page.date %}
            <ul class="post-related">
                {% if page.next %}
                <li>新篇: <a class="post-newer" href="{{ page.next.url }}">{{ page.next.title }}</a></li>
                {% endif %}
                {% if page.previous %}
                <li>旧作: <a class="post-older" href="{{ page.previous.url }}">{{ page.previous.title }}</a></li>
                {% endif %}
            </ul>
            {% endif %}
        </div>
    </article>

    {% comment %}
    <div class="post-donate-wrap">
        <div class="post-donate" id="donate">
            <p>如果觉得这篇文章对您有用, 请随意打赏.</p>
            <ul class="donate-buttons">
                <li><a id="donate-button-wechatpay" href="#">微信支付</a></li>
                <li><a id="donate-button-alipay" href="#">支付宝</a></li>
                <li><a id="donate-button-paypal" href="#">PayPal</a></li>
            </ul>

            <div id="donate-modal-wechatpay" class="modal">
                <p>您的支持将鼓励作者写作更多实用教程.</p>
                <div class="qrcode">
                    <img src="/assets/img/wechat_rmb_2.png" alt="微信打赏2元">
                    <strong><span>&yen;</span>2.00</strong>
                </div>
                <p class="tips">打开微信, 点击右上角"+", 选择"扫一扫".</p>
            </div>
            <div id="donate-modal-alipay" class="modal">
                <p>您的支持将鼓励作者写作更多实用教程.</p>
                <div class="qrcode">
                    <img src="/assets/img/alipay_rmb_2.png" alt="支付宝打赏2元">
                    <strong><span>&yen;</span>2.00</strong>
                </div>
            </div>
            <div id="donate-modal-paypal" class="modal">
                <p>您的支持将鼓励作者写作更多实用教程.</p>
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                    <input type="hidden" name="cmd" value="_s-xclick">
                    <input type="hidden" name="hosted_button_id" value="YB3LBHPPHXM4Y">
                    <input type="hidden" name="on0" value="Donate">
                    <label for="paypal">PayPal</label><br>
                    <select name="os0" id="paypal">
                        <option value="1 -">1 - $ 1.00 USD</option>
                        <option value="2 -">2 - $ 2.00 USD</option>
                        <option value="3 -">3 - $ 5.00 USD</option>
                    </select>
                    <input type="hidden" name="currency_code" value="USD">
                    <input type="submit" name="submit" value="Pay">
                </form>
            </div>
        </div>
        <script>
            $(document).ready(function(){
                $('body').append('<div id="donate-dialog-wrap"></div>')
                        .append($('#donate-modal-wechatpay'))
                        .append($('#donate-modal-alipay'))
                        .append($('#donate-modal-paypal'));

                $('#donate-button-alipay').click(function(){
                    showModal('#donate-modal-alipay');
                    return false;
                });
                $('#donate-button-wechatpay').click(function(){
                    showModal('#donate-modal-wechatpay');
                    return false;
                });
                $('#donate-button-paypal').click(function(){
                    showModal('#donate-modal-paypal');
                    return false;
                });

//                $('.modal').click(hideModal);
                $('#donate-dialog-wrap').click(hideModal);

                function showModal(targetModal) {
                    $('#donate-dialog-wrap').show(0, function(){
                        $('#donate-dialog-wrap').css('opacity', '1');
                        $(targetModal).css({
                            'top' : '200%'
                        });
                        $(targetModal).show(1, function(){
                            $(targetModal).css({
                                'transform' : 'rotate(0)',
                                'top' : '50%',
                                'opacity' : '1'
                            });
                        });
                    });
                }

                function hideModal() {
                    $('#donate-dialog-wrap').css('opacity', '0');
                    $('#donate-dialog-wrap').delay(300).hide(0);
                    $('.modal').css({
                        'transform' : 'rotate(-20deg)',
                        'top' : '200%',
                        'opacity' : '0'
                    });
                    $('.modal').hide(300);
                }


            });
        </script>
    </div>


    {% endcomment %}


    {% assign commentId = page.id | replace:  '/', '-' | remove_first: '-' %}
    {% if page.comment == true %}
    <div class="post-comments-wrap">
        <div class="post-comments">
            <div id="SOHUCS" sid="{{ commentId }}"></div>
            <script src="http://changyan.sohu.com/upload/changyan.js"></script>
            <script>
                window.changyan.api.config({
                    appid: 'cyrVOtEMg',
                    conf: 'prod_c6a0ab76c08ae21be1877d9daf4f93f0'
                });
            </script>
        </div>
    </div>
    {% endif %}
</div>

{% include footer.html %}
