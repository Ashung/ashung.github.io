---
title:  Sketch 数据填充
excerpt: 使用 Stuffing 插件处理实际项目的数据填充。
updated: 2018-10-24
---

其实 6 月份就收到 Sketch 数据填充插件的资料，我开始决定做一个中文数据的插件 —— Stuffing，因为有人在做[英文版](https://rdd.reactdraw.com/)的。原本计划 Sketch 52 发布时插件也完成一些基础功能，结果到现在发布快一个月了插件差不多才可以用。

本文主要是想介绍使用 Stuffing 插件增强原始功能，以及在实际项目上的应用。但是如果都写这些，就和以往的文章只有很小一部分设计师可以看懂了，所以我费了点电池在前文加入一些 Sketch 数据填充的基础。

## 数据填充基础

### 对图层插入数据

Sketch 52 的数据填充功能用于在快速对图层插入文本或图片数据。目前有两种操作方式：一是选择文本或形状图层，使用工具栏 “Data” 图标或应用菜单 “Layer” - “Data” 中选择数据源；二是选择 Symbol 实例图层，从右侧属性面板 Overrides 下标签栏的数据图标的菜单中选择数据源。

![]()

对图层应用数填充后，该图层将与当前数据源绑定，使用数据菜单下的 “Refresh Data / Refresh Data from Master” 或快捷键 “CMD + Shift + D” 重新应用当前数据。使用数据菜单下的 “Clean Data” 解除当前数据源绑定。Symbol 内如果有图层绑定数据源，该实例标签栏的数据图标将高亮显示，同时菜单下有 “Refresh Data” 菜单。

### 制作数据源

当你学会对图层插入数据，你会对这种高效率感到震惊，但随后你会发现自带的那些英文名、歪果仁头像也不是很接地气。Sketch 给初级用户一种简单的制作数据源方法，文本数据使用每行一个数据纯文本文件，图片数据则使用包含图片的文件夹。这些在 “Preferences” - “Data” 弹出框中，从底部的 “Add Data...” 按钮添加。

![]()

从右键菜单新建文件夹，然后把图拖进文件夹，这个太简单了，但是要跟一些设计师解释什么纯文本的就有点费劲。文本数据使用的是纯文本文件，不是 Word 的那种格式，也不是 macOS 系统上 “文本编辑” 的默认格式。既然很难跟你们解释那种 “纯”，你们就用系统自带的 “文本编辑” 吧，但是在编辑前必须从菜单 “格式” 下选择 “制作纯文本” ，此时软件的文字样式工具栏会隐藏，保存时选择 UTF-8 编码和 TXT 后缀就可以了。

![]()

图片数据需要注意图像的尺寸不要过大，并且尽量保存一致，最好使用无损压缩软件优化过，这样保证 Sketch 文档不会因为填充图片导致体积剧增。

### 资源下载

这种添加数据源方式操作简单，且容易在团队中共享，



但是有个局限是无法对图层实现数据有序的填充，例如列表中需要有一个递增的序号，也无法在需要图文匹配的情况下实现数据关联。



----

有序数据

关联数据





自定义表达式

i > 0 ? data[i-1] + "" + (i+1) : i +1

```javascript
(i < 2) ? 1 : Number(data[i-1]) + Number(data[i-2])
```



```javascript
(Math.random() * 100).toFixed(2)
```



```javascript
Math.random() < 0.8 ? Math.floor(Math.random() * (100 - 60 + 1)) + 60 : Math.floor(Math.random() * 59)
```



```javascript
var t = ''; for(var j=0;j<50;j++){t += Math.floor(Math.random()*2)} t
```



----

开发数据插件